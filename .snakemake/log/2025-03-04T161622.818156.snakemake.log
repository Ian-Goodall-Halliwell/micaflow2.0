Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 24
Rules claiming more threads will be scaled down.
Conda environments: ignored
Job stats:
job                        count
-----------------------  -------
all                            1
apply_warp_flair_to_t1w        2
apply_warp_to_mni              2
calculate_metrics              2
dwi_bias_correction            1
dwi_compute_fa_md              1
dwi_fa_md_registration         1
dwi_registration               1
dwi_skull_strip                1
registration_t1w               1
run_texture                    2
synthseg_dwi                   1
total                         16

Select jobs to execute...

[Tue Mar  4 16:16:22 2025]
rule dwi_skull_strip:
    input: outputs/sub-HC131/ses-01/xfm/corrected_image.nii.gz
    output: outputs/sub-HC131/ses-01/anat/DWI_hdbet.nii.gz, outputs/sub-HC131/ses-01/anat/DWI_hdbet_bet.nii.gz
    jobid: 23
    reason: Missing output files: outputs/sub-HC131/ses-01/anat/DWI_hdbet_bet.nii.gz
    resources: tmpdir=/tmp


[Tue Mar  4 16:16:22 2025]
rule synthseg_dwi:
    input: outputs/sub-HC131/ses-01/xfm/corrected_image.nii.gz, outputs/sub-HC131/ses-01/xfm/FLAIR_parcellation.nii.gz
    output: outputs/sub-HC131/ses-01/xfm/DWI_parcellation.nii.gz
    jobid: 25
    reason: Missing output files: outputs/sub-HC131/ses-01/xfm/DWI_parcellation.nii.gz
    threads: 4
    resources: tmpdir=/tmp


[Tue Mar  4 16:16:22 2025]
rule apply_warp_to_mni:
    input: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_desc-N4_T1w.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-T1w_to-MNI152_fwdfield.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-T1w_to-MNI152_fwdaffine.mat, atlas/mni_icbm152_t1_tal_nlin_sym_09a.nii
    output: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_T1w.nii.gz
    jobid: 2
    reason: Missing output files: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_T1w.nii.gz
    wildcards: modality=T1w
    resources: tmpdir=/tmp


[Tue Mar  4 16:16:22 2025]
rule registration_t1w:
    input: outputs/sub-HC131/ses-01/xfm/T1w_parcellation.nii.gz, outputs/sub-HC131/ses-01/xfm/FLAIR_parcellation.nii.gz
    output: outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_FLAIR_space-T1w.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdfield.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_bakfield.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdaffine.mat, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_bakaffine.mat
    jobid: 12
    reason: Missing output files: outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdaffine.mat, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdfield.nii.gz
    resources: tmpdir=/tmp

[Tue Mar  4 16:16:25 2025]
Finished job 2.
1 of 16 steps (6%) done
Select jobs to execute...

[Tue Mar  4 16:16:25 2025]
rule calculate_metrics:
    input: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_T1w.nii.gz, atlas/mni_icbm152_t1_tal_nlin_sym_09a.nii
    output: outputs/sub-HC131/ses-01/metrics/T1w_sub-HC131_ses-01_jaccard.csv
    jobid: 14
    reason: Missing output files: outputs/sub-HC131/ses-01/metrics/T1w_sub-HC131_ses-01_jaccard.csv; Input files updated by another job: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_T1w.nii.gz
    wildcards: modality=T1w
    resources: tmpdir=/tmp


[Tue Mar  4 16:16:25 2025]
rule run_texture:
    input: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_T1w.nii.gz, atlas/mni_icbm152_t1_tal_nlin_sym_09a_mask.nii
    output: outputs/sub-HC131/ses-01/textures/sub-HC131_ses-01_T1w_textures_output_gradient_magnitude.nii, outputs/sub-HC131/ses-01/textures/sub-HC131_ses-01_T1w_textures_output_relative_intensity.nii
    jobid: 1
    reason: Missing output files: outputs/sub-HC131/ses-01/textures/sub-HC131_ses-01_T1w_textures_output_gradient_magnitude.nii, outputs/sub-HC131/ses-01/textures/sub-HC131_ses-01_T1w_textures_output_relative_intensity.nii; Input files updated by another job: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_T1w.nii.gz
    wildcards: modality=T1w
    resources: tmpdir=/tmp

[Tue Mar  4 16:16:46 2025]
Finished job 12.
2 of 16 steps (12%) done
Select jobs to execute...

[Tue Mar  4 16:16:46 2025]
rule apply_warp_flair_to_t1w:
    input: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_desc-N4_FLAIR.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdfield.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdaffine.mat, outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_desc-N4_FLAIR.nii.gz
    output: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-T1w_FLAIR.nii.gz
    jobid: 9
    reason: Missing output files: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-T1w_FLAIR.nii.gz; Input files updated by another job: outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdaffine.mat, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdfield.nii.gz
    wildcards: modality=FLAIR
    resources: tmpdir=/tmp


[Tue Mar  4 16:16:46 2025]
rule apply_warp_flair_to_t1w:
    input: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_desc-N4_T1w.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdfield.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdaffine.mat, outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_desc-N4_T1w.nii.gz
    output: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-T1w_T1w.nii.gz
    jobid: 26
    reason: Missing output files: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-T1w_T1w.nii.gz; Input files updated by another job: outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdaffine.mat, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-FLAIR_to-T1w_fwdfield.nii.gz
    wildcards: modality=T1w
    resources: tmpdir=/tmp

[Tue Mar  4 16:16:47 2025]
Finished job 23.
3 of 16 steps (19%) done
Select jobs to execute...

[Tue Mar  4 16:16:47 2025]
rule dwi_bias_correction:
    input: outputs/sub-HC131/ses-01/xfm/topup_corrected.nii.gz, outputs/sub-HC131/ses-01/anat/DWI_hdbet_bet.nii.gz
    output: outputs/sub-HC131/ses-01/dwi/denoised_moving_corrected.nii.gz
    jobid: 18
    reason: Missing output files: outputs/sub-HC131/ses-01/dwi/denoised_moving_corrected.nii.gz; Input files updated by another job: outputs/sub-HC131/ses-01/anat/DWI_hdbet_bet.nii.gz
    resources: tmpdir=/tmp

[Tue Mar  4 16:16:49 2025]
Finished job 9.
4 of 16 steps (25%) done
Select jobs to execute...

[Tue Mar  4 16:16:49 2025]
rule apply_warp_to_mni:
    input: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-T1w_FLAIR.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-T1w_to-MNI152_fwdfield.nii.gz, outputs/sub-HC131/ses-01/xfm/sub-HC131_ses-01_from-T1w_to-MNI152_fwdaffine.mat, atlas/mni_icbm152_t1_tal_nlin_sym_09a.nii
    output: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_FLAIR.nii.gz
    jobid: 8
    reason: Missing output files: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_FLAIR.nii.gz; Input files updated by another job: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-T1w_FLAIR.nii.gz
    wildcards: modality=FLAIR
    resources: tmpdir=/tmp

[Tue Mar  4 16:16:49 2025]
Finished job 26.
5 of 16 steps (31%) done
[Tue Mar  4 16:16:51 2025]
Error in rule dwi_bias_correction:
    jobid: 18
    input: outputs/sub-HC131/ses-01/xfm/topup_corrected.nii.gz, outputs/sub-HC131/ses-01/anat/DWI_hdbet_bet.nii.gz
    output: outputs/sub-HC131/ses-01/dwi/denoised_moving_corrected.nii.gz
    conda-env: /home/ian/GitHub/micaflow2.0/.snakemake/conda/349fd313c69886c6d99e5ce9c37a90c0_
    shell:
        
            python3 scripts/dwi_biascorrection.py                 --image outputs/sub-HC131/ses-01/xfm/topup_corrected.nii.gz                 --mask outputs/sub-HC131/ses-01/anat/DWI_hdbet_bet.nii.gz                 --output outputs/sub-HC131/ses-01/dwi/denoised_moving_corrected.nii.gz
            
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Tue Mar  4 16:16:51 2025]
Finished job 8.
6 of 16 steps (38%) done
[Tue Mar  4 16:16:54 2025]
Finished job 1.
7 of 16 steps (44%) done
[Tue Mar  4 16:17:01 2025]
Finished job 25.
8 of 16 steps (50%) done
Terminating processes on user request, this might take some time.
[Tue Mar  4 16:17:03 2025]
Error in rule calculate_metrics:
    jobid: 14
    input: outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_T1w.nii.gz, atlas/mni_icbm152_t1_tal_nlin_sym_09a.nii
    output: outputs/sub-HC131/ses-01/metrics/T1w_sub-HC131_ses-01_jaccard.csv
    conda-env: /home/ian/GitHub/micaflow2.0/.snakemake/conda/349fd313c69886c6d99e5ce9c37a90c0_
    shell:
        
        python3 scripts/calculate_metrics.py             outputs/sub-HC131/ses-01/anat/sub-HC131_ses-01_space-MNI152_T1w.nii.gz             atlas/mni_icbm152_t1_tal_nlin_sym_09a.nii             outputs/sub-HC131/ses-01/metrics/T1w_sub-HC131_ses-01_jaccard.csv
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Complete log: .snakemake/log/2025-03-04T161622.818156.snakemake.log
